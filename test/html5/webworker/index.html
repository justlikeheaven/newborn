<html>
	<head>
		<meta charset="UTF-8">
		<title>web worker</title>
	</head>
	<body>
		<button id="post">发送消息</button>
		<button id="stop">停止</button>
	</body>
	<script>
		function stopWorker(){
			w.terminate();
		}
		function messageHandler(e){
			console.log(e);
		}
		function errorHandler(e){
			console.log(e);
		}
		if(typeof(Worker)=='undefined'){
			document.write('你的浏览器不支持h5 web worker');
		}
		var w = new Worker('listener.js');
		//注册监听事件
		w.addEventListener('message', messageHandler, true);
		w.addEventListener('error', errorHandler, true);
		
		document.getElementById('post').onclick = function(){
			w.postMessage('post a message');
		}
		document.getElementById('stop').onclick = stopWorker;
	</script>
</html>