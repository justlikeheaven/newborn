## jquery-2.0.0.js 源码分析  ##

> 知识点
 -
 - 1、匿名函数
 - 2、匿名函数对外提供接口
 - 3、静态方法，实例方法的关系
 - 4、Sizzle的使用
 - 5、回调函数
 - 6、异步调用
 - 7、数据缓存
 - 8、队列管理
 
> 代码功能片段分析

	//(function(){

    //一、：（21行 ~ 94行）  定义了一些变量和函数
       
    //jQuery = function(){};

    //二、：（96行 ~ 283 行）,给jQ对象，添加一些方法和属性

    // （285行 ~ 347行） extend: JQ的继承方法

    // （349行 ~ 817行） jQuery.extend() 扩展一些工具方法

    // (877行 ~ 2806行) Sizzle： 复杂选择器的实现，例如（'ul li + p input.class'）

    // （2830行 ~ 2992行）Callbacks：回调对象 （对函数的统一管理）

    // （2993行 ~ 3133行） Deferred: 延迟对象：（对异步的统一管理）

    // (3134行 ~ 3245行)  support: 功能检测

    // (3258 行~ 3597 行) data() : 数据缓存

    //（3598行 ~ 3743行 ） queue() : 队列管理

    // (3749 ~ 4241) attr() prop() val() addClass()等： 对元素属性的操作

    //（4242 ~ 5064） on() trigger() 事件

    //（5057 ~ 5989）DOM操作：添加 删除 获取 包装 DOM筛选

    //（5990 ~ 6549） css(): 样式的操作

    //（6550 ~ 7783） 提交的数据和ajax(): ajax()  load()

    // (7784 ~ 8510) animate(): 运动的方法

    //（8581 ~ 8718） offset()：位置和尺寸的方法

    //（8730 ·~ 8747）JQ支持模块化的模式

    // （8752 行） 对外提供了jQuery 和 $ 接口  

    //  window.jQuery = window.$ = jQuery;

	//})();

> 逐句分析
 -一、：
 - `((function( window, undefined ) {}))`
 - 传入`undefined`，避免外部修改
 - 避免使用`use strict` 严格模式
 - 注释中的索引号，可以在官网找到对应的描述
 - `rootjQuery`
 - ：定义jQuery(document)，方便压缩
 - `readyList` 
 - ：和dom加载有关
 - `core_strundefined = typeof undefined` 
 - ：定义字符串形式的undefined，避免ie9以下的浏览器的
 - `location = window.location`
  `document = window.document`
  `docElem = document.documentElemet`
 - : 定义变量，有利于压缩
 - `_jQuery = window.jQuery`
 - `_$ = window.$`
 - ：防冲突
 - `class2type = {}` 
 - : 判断元素和类型的变量
 - `core_deletedIds = {}`
 - ：2.0版本之后没啥用就是空数组
 - `core_version = 2.0.3`
 - : 存版本号
 - `core_concat = core_deletedIds.concat,`
  `core_push = core_deletedIds.push,`
  `core_slice = core_deletedIds.slice,`
  `core_indexOf = core_deletedIds.indexOf,`
  `core_toString = class2type.toString,` 对象字面量
  `core_hasOwn = class2type.hasOwnProperty,` 对象字面量
 - `core_trim = core_version.trim,` 去除空格
 - : 局部变量的存储，也有利于压缩
 - `jQuery = function( selector, context ) {`
		`return new jQuery.fn.init( selector, context, rootjQuery );`
	`},`
 - :正则:
 - `core_pnum` 找匹配数字、
 - `core_rnotwhite` 单词、
 - `rquickExpr` 标签和id（防止xss注入）<p>afsd 或#div1
 - `risingleTag` 独立的空标签<p></p>
 - `rmsPrefix` 浏览器前缀 -webkit-margin-left: webkitMarginLeft\-ms-margin-left:MsMarginLeft
 - `rdashAlpha` 转大写字母，数字，字符
 - 转驼峰的回调函数:
 - `fcamelCase = function( all, letter ) {
		return letter.toUpperCase();
	},`
- dom 加载成功之后：
- `completed = function() {
		document.removeEventListener( "DOMContentLoaded", completed, false );
		window.removeEventListener( "load", completed, false );
		jQuery.ready();
	};`

- 二、
- 获取版本：$().jquery
- 修正constructor 指向
- 处理选择器
- 处理选择的元素是字符串